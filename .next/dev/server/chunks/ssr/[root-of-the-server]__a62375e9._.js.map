{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/components/book-details.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const BookDetails = registerClientReference(\n    function() { throw new Error(\"Attempted to call BookDetails() from the server but BookDetails is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/book-details.tsx <module evaluation>\",\n    \"BookDetails\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,wYAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,6DACA","ignoreList":[0]}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/components/book-details.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const BookDetails = registerClientReference(\n    function() { throw new Error(\"Attempted to call BookDetails() from the server but BookDetails is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/book-details.tsx\",\n    \"BookDetails\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,wYAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,yCACA","ignoreList":[0]}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/lib/redux/slices/authSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from \"@reduxjs/toolkit\"\nimport { SessionUser } from \"../../baserow/types\"\n\ninterface AuthState {\n    user: SessionUser | null\n    isAuthenticated: boolean\n}\n\nconst initialState: AuthState = {\n    user: null,\n    isAuthenticated: false,\n}\n\nconst authSlice = createSlice({\n    name: \"auth\",\n    initialState,\n    reducers: {\n        setCredentials: (\n            state,\n            action: PayloadAction<{ user: SessionUser }>\n        ) => {\n            state.user = action.payload.user\n            state.isAuthenticated = true\n        },\n        logout: (state) => {\n            state.user = null\n            state.isAuthenticated = false\n        },\n    },\n    selectors: {\n        selectUser: (state) => state.user,\n        selectIsAuthenticated: (state) => state.isAuthenticated,\n    },\n})\n\nexport const { setCredentials, logout } = authSlice.actions\nexport const { selectUser, selectIsAuthenticated } = authSlice.selectors\nexport default authSlice.reducer\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAQA,MAAM,eAA0B;IAC5B,MAAM;IACN,iBAAiB;AACrB;AAEA,MAAM,YAAY,IAAA,kZAAW,EAAC;IAC1B,MAAM;IACN;IACA,UAAU;QACN,gBAAgB,CACZ,OACA;YAEA,MAAM,IAAI,GAAG,OAAO,OAAO,CAAC,IAAI;YAChC,MAAM,eAAe,GAAG;QAC5B;QACA,QAAQ,CAAC;YACL,MAAM,IAAI,GAAG;YACb,MAAM,eAAe,GAAG;QAC5B;IACJ;IACA,WAAW;QACP,YAAY,CAAC,QAAU,MAAM,IAAI;QACjC,uBAAuB,CAAC,QAAU,MAAM,eAAe;IAC3D;AACJ;AAEO,MAAM,EAAE,cAAc,EAAE,MAAM,EAAE,GAAG,UAAU,OAAO;AACpD,MAAM,EAAE,UAAU,EAAE,qBAAqB,EAAE,GAAG,UAAU,SAAS;uCACzD,UAAU,OAAO"}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/lib/redux/services/baserowApi.ts"],"sourcesContent":["import { createApi, fetchBaseQuery } from \"@reduxjs/toolkit/query/react\"\nimport {\n    Book,\n    Author,\n    BorrowedBook,\n    SessionUser,\n    BaserowAuthor,\n    mapBaserowAuthorToAuthor,\n} from \"../../baserow/types\"\nimport { setCredentials, logout } from \"../slices/authSlice\"\n\n// Define a service using a base URL and expected endpoints\nexport const baserowApi = createApi({\n    reducerPath: \"baserowApi\",\n    baseQuery: fetchBaseQuery({ baseUrl: \"/\" }), // Relative URL to use internal Next.js API or proxy\n    tagTypes: [\"Book\", \"BorrowedBook\", \"User\"],\n    endpoints: (builder) => ({\n        // Books\n        getBooks: builder.query<Book[], void>({\n            query: () => \"api/books\",\n            providesTags: (result) =>\n                result\n                    ? [\n                        ...result.map(({ id }) => ({ type: \"Book\" as const, id })),\n                        { type: \"Book\", id: \"LIST\" },\n                    ]\n                    : [{ type: \"Book\", id: \"LIST\" }],\n        }),\n        getBook: builder.query<Book, string>({\n            query: (id) => `api/books/${id}`,\n            providesTags: (result, error, id) => [{ type: \"Book\", id }],\n        }),\n        getAuthors: builder.query<Author[], void>({\n            query: () => \"api/authors\",\n            transformResponse: (response: BaserowAuthor[]) =>\n                response.map(mapBaserowAuthorToAuthor),\n        }),\n\n        // Borrowing\n        borrowBook: builder.mutation<BorrowedBook, { bookId: string; userId: string; dueDate: string }>({\n            query: (body) => ({\n                url: \"api/borrow\",\n                method: \"POST\",\n                body,\n            }),\n            invalidatesTags: (result, error, { bookId, userId }) => [\n                { type: \"Book\", id: bookId },\n                { type: \"BorrowedBook\", id: \"LIST\" }, // Invalidate user's borrowed list\n            ],\n        }),\n        returnBook: builder.mutation<void, { borrowId: string; bookId: string; availableCopies: number }>({\n            query: (body) => ({\n                url: \"api/return\",\n                method: \"POST\",\n                body,\n            }),\n            invalidatesTags: (result, error, { bookId }) => [\n                { type: \"Book\", id: bookId },\n                { type: \"BorrowedBook\", id: \"LIST\" },\n            ],\n        }),\n        getBorrowedBooks: builder.query<BorrowedBook[], string>({\n            queryFn: async (userId) => {\n                const { getBorrowedBooks } = await import(\"../../baserow/client\")\n                const data = await getBorrowedBooks(userId)\n                return { data }\n            },\n            providesTags: [{ type: \"BorrowedBook\", id: \"LIST\" }],\n        }),\n\n        // Auth\n        login: builder.mutation<SessionUser, { email: string; password: string }>({\n            query: (credentials) => ({\n                url: \"api/auth/login\",\n                method: \"POST\",\n                body: credentials,\n            }),\n            transformResponse: (response: { success: boolean; user: SessionUser }) => response.user,\n            // Use onQueryStarted to dispatch setCredentials\n            async onQueryStarted(arg, { dispatch, queryFulfilled }) {\n                try {\n                    const { data } = await queryFulfilled\n                    dispatch(setCredentials({ user: data }))\n                } catch (err) {\n                    // Login failed\n                }\n            },\n        }),\n        logout: builder.mutation<void, void>({\n            query: () => ({\n                url: \"api/auth/logout\",\n                method: \"POST\",\n            }),\n            async onQueryStarted(arg, { dispatch, queryFulfilled }) {\n                try {\n                    await queryFulfilled\n                    dispatch(logout())\n                    // Ideally we also clear cache?\n                    dispatch(baserowApi.util.resetApiState())\n                } catch (err) { }\n            },\n        }),\n    }),\n})\n\nexport const {\n    useGetBooksQuery,\n    useGetBookQuery,\n    useGetAuthorsQuery,\n    useBorrowBookMutation,\n    useReturnBookMutation,\n    useGetBorrowedBooksQuery,\n    useLoginMutation,\n    useLogoutMutation,\n} = baserowApi\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AAQA;;;;AAGO,MAAM,aAAa,IAAA,uaAAS,EAAC;IAChC,aAAa;IACb,WAAW,IAAA,0YAAc,EAAC;QAAE,SAAS;IAAI;IACzC,UAAU;QAAC;QAAQ;QAAgB;KAAO;IAC1C,WAAW,CAAC,UAAY,CAAC;YACrB,QAAQ;YACR,UAAU,QAAQ,KAAK,CAAe;gBAClC,OAAO,IAAM;gBACb,cAAc,CAAC,SACX,SACM;2BACK,OAAO,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,GAAK,CAAC;gCAAE,MAAM;gCAAiB;4BAAG,CAAC;wBACxD;4BAAE,MAAM;4BAAQ,IAAI;wBAAO;qBAC9B,GACC;wBAAC;4BAAE,MAAM;4BAAQ,IAAI;wBAAO;qBAAE;YAC5C;YACA,SAAS,QAAQ,KAAK,CAAe;gBACjC,OAAO,CAAC,KAAO,CAAC,UAAU,EAAE,IAAI;gBAChC,cAAc,CAAC,QAAQ,OAAO,KAAO;wBAAC;4BAAE,MAAM;4BAAQ;wBAAG;qBAAE;YAC/D;YACA,YAAY,QAAQ,KAAK,CAAiB;gBACtC,OAAO,IAAM;gBACb,mBAAmB,CAAC,WAChB,SAAS,GAAG,CAAC,mJAAwB;YAC7C;YAEA,YAAY;YACZ,YAAY,QAAQ,QAAQ,CAAoE;gBAC5F,OAAO,CAAC,OAAS,CAAC;wBACd,KAAK;wBACL,QAAQ;wBACR;oBACJ,CAAC;gBACD,iBAAiB,CAAC,QAAQ,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,GAAK;wBACpD;4BAAE,MAAM;4BAAQ,IAAI;wBAAO;wBAC3B;4BAAE,MAAM;4BAAgB,IAAI;wBAAO;qBACtC;YACL;YACA,YAAY,QAAQ,QAAQ,CAAsE;gBAC9F,OAAO,CAAC,OAAS,CAAC;wBACd,KAAK;wBACL,QAAQ;wBACR;oBACJ,CAAC;gBACD,iBAAiB,CAAC,QAAQ,OAAO,EAAE,MAAM,EAAE,GAAK;wBAC5C;4BAAE,MAAM;4BAAQ,IAAI;wBAAO;wBAC3B;4BAAE,MAAM;4BAAgB,IAAI;wBAAO;qBACtC;YACL;YACA,kBAAkB,QAAQ,KAAK,CAAyB;gBACpD,SAAS,OAAO;oBACZ,MAAM,EAAE,gBAAgB,EAAE,GAAG;oBAC7B,MAAM,OAAO,MAAM,iBAAiB;oBACpC,OAAO;wBAAE;oBAAK;gBAClB;gBACA,cAAc;oBAAC;wBAAE,MAAM;wBAAgB,IAAI;oBAAO;iBAAE;YACxD;YAEA,OAAO;YACP,OAAO,QAAQ,QAAQ,CAAmD;gBACtE,OAAO,CAAC,cAAgB,CAAC;wBACrB,KAAK;wBACL,QAAQ;wBACR,MAAM;oBACV,CAAC;gBACD,mBAAmB,CAAC,WAAsD,SAAS,IAAI;gBACvF,gDAAgD;gBAChD,MAAM,gBAAe,GAAG,EAAE,EAAE,QAAQ,EAAE,cAAc,EAAE;oBAClD,IAAI;wBACA,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;wBACvB,SAAS,IAAA,qJAAc,EAAC;4BAAE,MAAM;wBAAK;oBACzC,EAAE,OAAO,KAAK;oBACV,eAAe;oBACnB;gBACJ;YACJ;YACA,QAAQ,QAAQ,QAAQ,CAAa;gBACjC,OAAO,IAAM,CAAC;wBACV,KAAK;wBACL,QAAQ;oBACZ,CAAC;gBACD,MAAM,gBAAe,GAAG,EAAE,EAAE,QAAQ,EAAE,cAAc,EAAE;oBAClD,IAAI;wBACA,MAAM;wBACN,SAAS,IAAA,6IAAM;wBACf,+BAA+B;wBAC/B,SAAS,WAAW,IAAI,CAAC,aAAa;oBAC1C,EAAE,OAAO,KAAK,CAAE;gBACpB;YACJ;QACJ,CAAC;AACL;AAEO,MAAM,EACT,gBAAgB,EAChB,eAAe,EACf,kBAAkB,EAClB,qBAAqB,EACrB,qBAAqB,EACrB,wBAAwB,EACxB,gBAAgB,EAChB,iBAAiB,EACpB,GAAG"}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/app/books/%5Bid%5D/page.tsx"],"sourcesContent":["import { notFound } from \"next/navigation\"\nimport { BookDetails } from \"@/components/book-details\"\nimport { useGetBooksQuery } from \"@/lib/redux/services/baserowApi\"\n\nexport default async function BookPage({\n  params,\n}: {\n  params: Promise<{ id: string }>\n}) {\n  const { id } = await params\n  // const book = await getBook(id)\n\n  const { data: book } = useGetBooksQuery(undefined, {\n    selectFromResult: ({ data }) => ({\n      data: data?.find(book => book.id === id)\n    })\n  })\n\n  if (!book) {\n    notFound()\n  }\n\n  return (\n    <BookDetails\n      book={book}\n    />\n  )\n}\n\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;AACA;;;;;AAEe,eAAe,SAAS,EACrC,MAAM,EAGP;IACC,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,iCAAiC;IAEjC,MAAM,EAAE,MAAM,IAAI,EAAE,GAAG,IAAA,0JAAgB,EAAC,WAAW;QACjD,kBAAkB,CAAC,EAAE,IAAI,EAAE,GAAK,CAAC;gBAC/B,MAAM,MAAM,KAAK,CAAA,OAAQ,KAAK,EAAE,KAAK;YACvC,CAAC;IACH;IAEA,IAAI,CAAC,MAAM;QACT,IAAA,iUAAQ;IACV;IAEA,qBACE,8WAAC,6IAAW;QACV,MAAM;;;;;;AAGZ"}}]
}