{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8WAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/components/admin-borrow-grid.tsx"],"sourcesContent":["\"use client\"\n\nimport { useMemo, useState, useCallback } from \"react\"\nimport { AgGridReact } from \"ag-grid-react\"\nimport { AllCommunityModule, ModuleRegistry, themeQuartz } from \"ag-grid-community\"\nimport type { ColDef } from \"ag-grid-community\"\nimport { Input } from \"@/components/ui/input\"\nimport { Button } from \"@/components/ui/button\"\nimport { Search, Download } from \"lucide-react\"\n\nModuleRegistry.registerModules([AllCommunityModule])\n\ninterface BorrowRecord {\n  id: string\n  user_id: string\n  book_id: string\n  status: string\n  borrowed_at: string\n  due_date: string\n  returned_at: string | null\n  book: {\n    id: string\n    title: string\n    isbn: string\n    genre: string\n    cover_image: string | null\n    author: { name: string } | null\n  } | null\n  user_profile: {\n    email: string\n    full_name: string | null\n  } | null\n}\n\ninterface AdminBorrowGridProps {\n  borrowedBooks: BorrowRecord[]\n}\n\nexport function AdminBorrowGrid({ borrowedBooks }: AdminBorrowGridProps) {\n  const [quickFilterText, setQuickFilterText] = useState(\"\")\n  const [gridApi, setGridApi] = useState<any>(null)\n\n  const columnDefs = useMemo<ColDef[]>(\n    () => [\n      {\n        headerName: \"User\",\n        field: \"user_profile\",\n        valueGetter: (params: any) => {\n          const profile = params.data?.user_profile\n          return profile?.full_name || profile?.email || \"Unknown\"\n        },\n        filter: \"agTextColumnFilter\",\n        flex: 1.5,\n        minWidth: 150,\n      },\n      {\n        headerName: \"Email\",\n        field: \"user_profile.email\",\n        valueGetter: (params: any) => params.data?.user_profile?.email || \"N/A\",\n        filter: \"agTextColumnFilter\",\n        flex: 1.5,\n        minWidth: 180,\n      },\n      {\n        headerName: \"Book Title\",\n        field: \"book.title\",\n        valueGetter: (params: any) => params.data?.book?.title || \"Unknown\",\n        filter: \"agTextColumnFilter\",\n        flex: 2,\n        minWidth: 200,\n      },\n      {\n        headerName: \"Author\",\n        field: \"book.author\",\n        valueGetter: (params: any) => params.data?.book?.author?.name || \"Unknown\",\n        filter: \"agTextColumnFilter\",\n        flex: 1.5,\n        minWidth: 150,\n      },\n      {\n        headerName: \"Genre\",\n        field: \"book.genre\",\n        valueGetter: (params: any) => params.data?.book?.genre || \"N/A\",\n        filter: \"agTextColumnFilter\",\n        flex: 1,\n        minWidth: 100,\n      },\n      {\n        headerName: \"Status\",\n        field: \"status\",\n        filter: \"agTextColumnFilter\",\n        flex: 1,\n        minWidth: 100,\n        cellRenderer: (params: any) => {\n          const status = params.value\n          if (status === \"borrowed\") {\n            const dueDate = new Date(params.data?.due_date)\n            const isOverdue = dueDate < new Date()\n            return `<span class=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n              isOverdue\n                ? \"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200\"\n                : \"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200\"\n            }\">${isOverdue ? \"Overdue\" : \"Borrowed\"}</span>`\n          }\n          return `<span class=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200\">Returned</span>`\n        },\n      },\n      {\n        headerName: \"Borrowed Date\",\n        field: \"borrowed_at\",\n        filter: \"agDateColumnFilter\",\n        flex: 1,\n        minWidth: 120,\n        valueFormatter: (params: any) => {\n          if (!params.value) return \"N/A\"\n          return new Date(params.value).toLocaleDateString()\n        },\n        sort: \"desc\",\n      },\n      {\n        headerName: \"Due Date\",\n        field: \"due_date\",\n        filter: \"agDateColumnFilter\",\n        flex: 1,\n        minWidth: 120,\n        valueFormatter: (params: any) => {\n          if (!params.value) return \"N/A\"\n          return new Date(params.value).toLocaleDateString()\n        },\n      },\n      {\n        headerName: \"Returned Date\",\n        field: \"returned_at\",\n        filter: \"agDateColumnFilter\",\n        flex: 1,\n        minWidth: 120,\n        valueFormatter: (params: any) => {\n          if (!params.value) return \"-\"\n          return new Date(params.value).toLocaleDateString()\n        },\n      },\n    ],\n    [],\n  )\n\n  const defaultColDef = useMemo<ColDef>(\n    () => ({\n      sortable: true,\n      resizable: true,\n    }),\n    [],\n  )\n\n  const onGridReady = useCallback((params: any) => {\n    setGridApi(params.api)\n  }, [])\n\n  const exportToCsv = useCallback(() => {\n    if (gridApi) {\n      gridApi.exportDataAsCsv({\n        fileName: `borrow-records-${new Date().toISOString().split(\"T\")[0]}.csv`,\n      })\n    }\n  }, [gridApi])\n\n  const customTheme = themeQuartz.withParams({\n    backgroundColor: \"var(--card)\",\n    foregroundColor: \"var(--card-foreground)\",\n    headerBackgroundColor: \"var(--muted)\",\n    headerTextColor: \"var(--muted-foreground)\",\n    oddRowBackgroundColor: \"var(--card)\",\n    rowHoverColor: \"var(--accent)\",\n    borderColor: \"var(--border)\",\n    fontFamily: \"var(--font-sans)\",\n    headerFontWeight: 600,\n    rowBorder: true,\n    wrapperBorder: true,\n    wrapperBorderRadius: \"0.5rem\",\n  })\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between\">\n        <div className=\"relative w-full sm:w-80\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search records...\"\n            value={quickFilterText}\n            onChange={(e) => setQuickFilterText(e.target.value)}\n            className=\"pl-9\"\n          />\n        </div>\n        <Button variant=\"outline\" size=\"sm\" onClick={exportToCsv}>\n          <Download className=\"h-4 w-4 mr-2\" />\n          Export CSV\n        </Button>\n      </div>\n\n      <div className=\"h-150 w-full\">\n        <AgGridReact\n          theme={customTheme}\n          rowData={borrowedBooks}\n          columnDefs={columnDefs}\n          defaultColDef={defaultColDef}\n          quickFilterText={quickFilterText}\n          pagination={true}\n          paginationPageSize={20}\n          paginationPageSizeSelector={[10, 20, 50, 100]}\n          onGridReady={onGridReady}\n          animateRows={true}\n          rowSelection=\"multiple\"\n        />\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}