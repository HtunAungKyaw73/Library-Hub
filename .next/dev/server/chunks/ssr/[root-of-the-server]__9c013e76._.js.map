{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/components/admin-borrow-grid.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminBorrowGrid = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminBorrowGrid() from the server but AdminBorrowGrid is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/admin-borrow-grid.tsx <module evaluation>\",\n    \"AdminBorrowGrid\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,kBAAkB,IAAA,wYAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,kEACA","ignoreList":[0]}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/components/admin-borrow-grid.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminBorrowGrid = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminBorrowGrid() from the server but AdminBorrowGrid is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/admin-borrow-grid.tsx\",\n    \"AdminBorrowGrid\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,kBAAkB,IAAA,wYAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,8CACA","ignoreList":[0]}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/app/admin/page.tsx"],"sourcesContent":["import { redirect } from \"next/navigation\"\nimport { getSession } from \"@/lib/baserow/auth\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { BookOpen, Users, Clock, CheckCircle } from \"lucide-react\"\nimport { AdminBorrowGrid } from \"@/components/admin-borrow-grid\"\n\n// Baserow API for fetching all borrow records\nasync function getAllBorrowRecords() {\n  const BASEROW_API_URL = process.env.NEXT_PUBLIC_BASEROW_API_URL || \"https://api.baserow.io\"\n  const BASEROW_API_TOKEN = process.env.NEXT_PUBLIC_BASEROW_API_TOKEN || \"\"\n  const TABLE_BORROW_BOOKS = process.env.NEXT_PUBLIC_BASEROW_TABLE_BORROW_BOOKS || \"772607\"\n\n  try {\n    const response = await fetch(\n      `${BASEROW_API_URL}/api/database/rows/table/${TABLE_BORROW_BOOKS}/?user_field_names=true&size=200`,\n      {\n        headers: {\n          Authorization: `Token ${BASEROW_API_TOKEN}`,\n          \"Content-Type\": \"application/json\",\n        },\n        cache: \"no-store\",\n      }\n    )\n\n    if (!response.ok) return []\n\n    const data = await response.json()\n    return data.results || []\n  } catch {\n    return []\n  }\n}\n\nexport default async function AdminPage() {\n  const session = await getSession()\n\n  if (!session) {\n    redirect(\"/auth/login\")\n  }\n\n  // Check if user is admin\n  if (!session.isAdmin) {\n    redirect(\"/\")\n  }\n\n  // Fetch all borrowed books\n  const borrowedBooks = await getAllBorrowRecords()\n\n  // Calculate stats\n  const totalBorrowed = borrowedBooks?.length || 0\n  const currentlyBorrowed = borrowedBooks?.filter((b: { Status: string }) => b.Status === \"borrowed\").length || 0\n  const returned = borrowedBooks?.filter((b: { Status: string }) => b.Status === \"returned\").length || 0\n  const overdue =\n    borrowedBooks?.filter((b: { Status: string; Due_Date: string }) => {\n      if (b.Status !== \"borrowed\") return false\n      return new Date(b.Due_Date) < new Date()\n    }).length || 0\n\n  // Get unique users count\n  const uniqueUsers = new Set(borrowedBooks?.map((b: { User?: { id: number }[] }) => b.User?.[0]?.id)).size\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-pink-700 mb-2\">Admin Dashboard</h1>\n        <p className=\"text-muted-foreground\">Track and manage all book borrowing activities</p>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Borrowed</CardTitle>\n            <BookOpen className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{totalBorrowed}</div>\n            <p className=\"text-xs text-muted-foreground\">All time records</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Currently Borrowed</CardTitle>\n            <Clock className=\"h-4 w-4 text-amber-500\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-amber-600\">{currentlyBorrowed}</div>\n            <p className=\"text-xs text-muted-foreground\">Books out now</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Returned</CardTitle>\n            <CheckCircle className=\"h-4 w-4 text-emerald-500\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-emerald-600\">{returned}</div>\n            <p className=\"text-xs text-muted-foreground\">Completed returns</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Overdue</CardTitle>\n            <Clock className=\"h-4 w-4 text-destructive\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-destructive\">{overdue}</div>\n            <p className=\"text-xs text-muted-foreground\">Past due date</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Active Users</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{uniqueUsers}</div>\n            <p className=\"text-xs text-muted-foreground\">Unique borrowers</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Borrow Records Grid */}\n      <Card>\n        <CardHeader>\n          <CardTitle>All Borrow Records</CardTitle>\n          <CardDescription>Complete history of all book borrowing activities</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <AdminBorrowGrid borrowedBooks={borrowedBooks || []} />\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}}]
}