{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/components/admin-borrow-grid.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminBorrowGrid = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminBorrowGrid() from the server but AdminBorrowGrid is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/admin-borrow-grid.tsx <module evaluation>\",\n    \"AdminBorrowGrid\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,kBAAkB,IAAA,wYAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,kEACA","ignoreList":[0]}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/components/admin-borrow-grid.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminBorrowGrid = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminBorrowGrid() from the server but AdminBorrowGrid is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/admin-borrow-grid.tsx\",\n    \"AdminBorrowGrid\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,kBAAkB,IAAA,wYAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,8CACA","ignoreList":[0]}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/Documents/web/library-management-system/app/admin-dashboard/page.tsx"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\"\nimport { redirect } from \"next/navigation\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { BookOpen, Users, Clock, CheckCircle } from \"lucide-react\"\nimport { AdminBorrowGrid } from \"@/components/admin-borrow-grid\"\n\nexport default async function AdminPage() {\n    const supabase = await createClient()\n\n    const {\n        data: { user },\n    } = await supabase.auth.getUser()\n\n    if (!user) {\n        redirect(\"/auth/login\")\n    }\n\n    // Check if user is admin\n    // const { data: profile } = await supabase.from(\"user_profiles\").select(\"is_admin\").eq(\"id\", user.id).single()\n    //\n    // if (!profile?.is_admin) {\n    //     redirect(\"/\")\n    // }\n\n    // Fetch all borrowed books with user and book details\n    const { data: borrowedBooks } = await supabase\n        .from(\"borrowed_books\")\n        .select(`\n      *,\n      book:books(id, title, isbn, genre, cover_image, author:authors(name)),\n      user_profile:user_profiles(email, full_name)\n    `)\n        .order(\"borrowed_at\", { ascending: false })\n\n    // Calculate stats\n    const totalBorrowed = borrowedBooks?.length || 0\n    const currentlyBorrowed = borrowedBooks?.filter((b) => b.status === \"borrowed\").length || 0\n    const returned = borrowedBooks?.filter((b) => b.status === \"returned\").length || 0\n    const overdue =\n        borrowedBooks?.filter((b) => {\n            if (b.status !== \"borrowed\") return false\n            return new Date(b.due_date) < new Date()\n        }).length || 0\n\n    // Get unique users count\n    const uniqueUsers = new Set(borrowedBooks?.map((b) => b.user_id)).size\n\n    return (\n        <div className=\"container mx-auto px-4 py-8\">\n            <div className=\"mb-8\">\n                <h1 className=\"text-3xl font-bold text-foreground mb-2\">Admin Dashboard</h1>\n                <p className=\"text-muted-foreground\">Track and manage all book borrowing activities</p>\n            </div>\n\n            {/* Stats Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8\">\n                <Card>\n                    <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n                        <CardTitle className=\"text-sm font-medium\">Total Borrowed</CardTitle>\n                        <BookOpen className=\"h-4 w-4 text-muted-foreground\" />\n                    </CardHeader>\n                    <CardContent>\n                        <div className=\"text-2xl font-bold\">{totalBorrowed}</div>\n                        <p className=\"text-xs text-muted-foreground\">All time records</p>\n                    </CardContent>\n                </Card>\n\n                <Card>\n                    <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n                        <CardTitle className=\"text-sm font-medium\">Currently Borrowed</CardTitle>\n                        <Clock className=\"h-4 w-4 text-amber-500\" />\n                    </CardHeader>\n                    <CardContent>\n                        <div className=\"text-2xl font-bold text-amber-600\">{currentlyBorrowed}</div>\n                        <p className=\"text-xs text-muted-foreground\">Books out now</p>\n                    </CardContent>\n                </Card>\n\n                <Card>\n                    <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n                        <CardTitle className=\"text-sm font-medium\">Returned</CardTitle>\n                        <CheckCircle className=\"h-4 w-4 text-emerald-500\" />\n                    </CardHeader>\n                    <CardContent>\n                        <div className=\"text-2xl font-bold text-emerald-600\">{returned}</div>\n                        <p className=\"text-xs text-muted-foreground\">Completed returns</p>\n                    </CardContent>\n                </Card>\n\n                <Card>\n                    <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n                        <CardTitle className=\"text-sm font-medium\">Overdue</CardTitle>\n                        <Clock className=\"h-4 w-4 text-destructive\" />\n                    </CardHeader>\n                    <CardContent>\n                        <div className=\"text-2xl font-bold text-destructive\">{overdue}</div>\n                        <p className=\"text-xs text-muted-foreground\">Past due date</p>\n                    </CardContent>\n                </Card>\n\n                <Card>\n                    <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n                        <CardTitle className=\"text-sm font-medium\">Active Users</CardTitle>\n                        <Users className=\"h-4 w-4 text-muted-foreground\" />\n                    </CardHeader>\n                    <CardContent>\n                        <div className=\"text-2xl font-bold\">{uniqueUsers}</div>\n                        <p className=\"text-xs text-muted-foreground\">Unique borrowers</p>\n                    </CardContent>\n                </Card>\n            </div>\n\n            {/* Borrow Records Grid */}\n            <Card>\n                <CardHeader>\n                    <CardTitle>All Borrow Records</CardTitle>\n                    <CardDescription>Complete history of all book borrowing activities</CardDescription>\n                </CardHeader>\n                <CardContent>\n                    <AdminBorrowGrid borrowedBooks={borrowedBooks || []} />\n                </CardContent>\n            </Card>\n        </div>\n    )\n}\n"],"names":[],"mappings":"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"}}]
}