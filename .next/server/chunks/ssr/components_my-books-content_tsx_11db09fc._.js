module.exports=[84768,a=>{"use strict";var b=a.i(64781),c=a.i(89982),d=a.i(8490),e=a.i(30505),f=a.i(3130),g=a.i(40695),h=a.i(54161);function i(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}function j(a,d=[]){let e=[],f=()=>{let b=e.map(a=>c.createContext(a));return function(d){let e=d?.[a]||b;return c.useMemo(()=>({[`__scope${a}`]:{...d,[a]:e}}),[d,e])}};return f.scopeName=a,[function(d,f){let g=c.createContext(f),h=e.length;e=[...e,f];let i=d=>{let{scope:e,children:f,...i}=d,j=e?.[a]?.[h]||g,k=c.useMemo(()=>i,Object.values(i));return(0,b.jsx)(j.Provider,{value:k,children:f})};return i.displayName=d+"Provider",[i,function(b,e){let i=e?.[a]?.[h]||g,j=c.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${b}\` must be used within \`${d}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let d=()=>{let d=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=d.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return c.useMemo(()=>({[`__scope${b.scopeName}`]:e}),[e])}};return d.scopeName=b.scopeName,d}(f,...d)]}var k=a.i(31010),l=a.i(57554),m=globalThis?.document?c.useLayoutEffect:()=>{},n=c["useId".toString()]||(()=>void 0),o=0;function p(a){let[b,d]=c.useState(n());return m(()=>{a||d(a=>a??String(o++))},[a]),a||(b?`radix-${b}`:"")}var q=a.i(4252);function r(a){let b=c.useRef(a);return c.useEffect(()=>{b.current=a}),c.useMemo(()=>(...a)=>b.current?.(...a),[])}function s({prop:a,defaultProp:b,onChange:d=()=>{}}){let[e,f]=function({defaultProp:a,onChange:b}){let d=c.useState(a),[e]=d,f=c.useRef(e),g=r(b);return c.useEffect(()=>{f.current!==e&&(g(e),f.current=e)},[e,f,g]),d}({defaultProp:b,onChange:d}),g=void 0!==a,h=g?a:e,i=r(d);return[h,c.useCallback(b=>{if(g){let c="function"==typeof b?b(a):b;c!==a&&i(c)}else f(b)},[g,a,f,i])]}var t=c.createContext(void 0);function u(a){let b=c.useContext(t);return a||b||"ltr"}var v="rovingFocusGroup.onEntryFocus",w={bubbles:!1,cancelable:!0},x="RovingFocusGroup",[y,z,A]=function(a){let d=a+"CollectionProvider",[e,f]=j(d),[g,h]=e(d,{collectionRef:{current:null},itemMap:new Map}),i=a=>{let{scope:d,children:e}=a,f=c.default.useRef(null),h=c.default.useRef(new Map).current;return(0,b.jsx)(g,{scope:d,itemMap:h,collectionRef:f,children:e})};i.displayName=d;let m=a+"CollectionSlot",n=c.default.forwardRef((a,c)=>{let{scope:d,children:e}=a,f=h(m,d),g=(0,k.useComposedRefs)(c,f.collectionRef);return(0,b.jsx)(l.Slot,{ref:g,children:e})});n.displayName=m;let o=a+"CollectionItemSlot",p="data-radix-collection-item",q=c.default.forwardRef((a,d)=>{let{scope:e,children:f,...g}=a,i=c.default.useRef(null),j=(0,k.useComposedRefs)(d,i),m=h(o,e);return c.default.useEffect(()=>(m.itemMap.set(i,{ref:i,...g}),()=>void m.itemMap.delete(i))),(0,b.jsx)(l.Slot,{...{[p]:""},ref:j,children:f})});return q.displayName=o,[{Provider:i,Slot:n,ItemSlot:q},function(b){let d=h(a+"CollectionConsumer",b);return c.default.useCallback(()=>{let a=d.collectionRef.current;if(!a)return[];let b=Array.from(a.querySelectorAll(`[${p}]`));return Array.from(d.itemMap.values()).sort((a,c)=>b.indexOf(a.ref.current)-b.indexOf(c.ref.current))},[d.collectionRef,d.itemMap])},f]}(x),[B,C]=j(x,[A]),[D,E]=B(x),F=c.forwardRef((a,c)=>(0,b.jsx)(y.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,b.jsx)(y.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,b.jsx)(G,{...a,ref:c})})}));F.displayName=x;var G=c.forwardRef((a,d)=>{let{__scopeRovingFocusGroup:e,orientation:f,loop:g=!1,dir:h,currentTabStopId:j,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:m,onEntryFocus:n,preventScrollOnEntryFocus:o=!1,...p}=a,t=c.useRef(null),x=(0,k.useComposedRefs)(d,t),y=u(h),[A=null,B]=s({prop:j,defaultProp:l,onChange:m}),[C,E]=c.useState(!1),F=r(n),G=z(e),H=c.useRef(!1),[I,J]=c.useState(0);return c.useEffect(()=>{let a=t.current;if(a)return a.addEventListener(v,F),()=>a.removeEventListener(v,F)},[F]),(0,b.jsx)(D,{scope:e,orientation:f,dir:y,loop:g,currentTabStopId:A,onItemFocus:c.useCallback(a=>B(a),[B]),onItemShiftTab:c.useCallback(()=>E(!0),[]),onFocusableItemAdd:c.useCallback(()=>J(a=>a+1),[]),onFocusableItemRemove:c.useCallback(()=>J(a=>a-1),[]),children:(0,b.jsx)(q.Primitive.div,{tabIndex:C||0===I?-1:0,"data-orientation":f,...p,ref:x,style:{outline:"none",...a.style},onMouseDown:i(a.onMouseDown,()=>{H.current=!0}),onFocus:i(a.onFocus,a=>{let b=!H.current;if(a.target===a.currentTarget&&b&&!C){let b=new CustomEvent(v,w);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=G().filter(a=>a.focusable);K([a.find(a=>a.active),a.find(a=>a.id===A),...a].filter(Boolean).map(a=>a.ref.current),o)}}H.current=!1}),onBlur:i(a.onBlur,()=>E(!1))})})}),H="RovingFocusGroupItem",I=c.forwardRef((a,d)=>{let{__scopeRovingFocusGroup:e,focusable:f=!0,active:g=!1,tabStopId:h,...j}=a,k=p(),l=h||k,m=E(H,e),n=m.currentTabStopId===l,o=z(e),{onFocusableItemAdd:r,onFocusableItemRemove:s}=m;return c.useEffect(()=>{if(f)return r(),()=>s()},[f,r,s]),(0,b.jsx)(y.ItemSlot,{scope:e,id:l,focusable:f,active:g,children:(0,b.jsx)(q.Primitive.span,{tabIndex:n?0:-1,"data-orientation":m.orientation,...j,ref:d,onMouseDown:i(a.onMouseDown,a=>{f?m.onItemFocus(l):a.preventDefault()}),onFocus:i(a.onFocus,()=>m.onItemFocus(l)),onKeyDown:i(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void m.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return J[e]}(a,m.orientation,m.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let e=o().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)e.reverse();else if("prev"===b||"next"===b){var c,d;"prev"===b&&e.reverse();let f=e.indexOf(a.currentTarget);e=m.loop?(c=e,d=f+1,c.map((a,b)=>c[(d+b)%c.length])):e.slice(f+1)}setTimeout(()=>K(e))}})})})});I.displayName=H;var J={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function K(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}var L=a=>{var b;let d,e,{present:f,children:g}=a,h=function(a){var b,d;let[e,f]=c.useState(),g=c.useRef({}),h=c.useRef(a),i=c.useRef("none"),[j,k]=(b=a?"mounted":"unmounted",d={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},c.useReducer((a,b)=>d[a][b]??a,b));return c.useEffect(()=>{let a=M(g.current);i.current="mounted"===j?a:"none"},[j]),m(()=>{let b=g.current,c=h.current;if(c!==a){let d=i.current,e=M(b);a?k("MOUNT"):"none"===e||b?.display==="none"?k("UNMOUNT"):c&&d!==e?k("ANIMATION_OUT"):k("UNMOUNT"),h.current=a}},[a,k]),m(()=>{if(e){let a,b=e.ownerDocument.defaultView??window,c=c=>{let d=M(g.current).includes(c.animationName);if(c.target===e&&d&&(k("ANIMATION_END"),!h.current)){let c=e.style.animationFillMode;e.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===e.style.animationFillMode&&(e.style.animationFillMode=c)})}},d=a=>{a.target===e&&(i.current=M(g.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{b.clearTimeout(a),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}k("ANIMATION_END")},[e,k]),{isPresent:["mounted","unmountSuspended"].includes(j),ref:c.useCallback(a=>{a&&(g.current=getComputedStyle(a)),f(a)},[])}}(f),i="function"==typeof g?g({present:h.isPresent}):c.Children.only(g),j=(0,k.useComposedRefs)(h.ref,(b=i,(e=(d=Object.getOwnPropertyDescriptor(b.props,"ref")?.get)&&"isReactWarning"in d&&d.isReactWarning)?b.ref:(e=(d=Object.getOwnPropertyDescriptor(b,"ref")?.get)&&"isReactWarning"in d&&d.isReactWarning)?b.props.ref:b.props.ref||b.ref));return"function"==typeof g||h.isPresent?c.cloneElement(i,{ref:j}):null};function M(a){return a?.animationName||"none"}L.displayName="Presence";var N="Tabs",[O,P]=j(N,[C]),Q=C(),[R,S]=O(N),T=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,onValueChange:f,defaultValue:g,orientation:h="horizontal",dir:i,activationMode:j="automatic",...k}=a,l=u(i),[m,n]=s({prop:e,onChange:f,defaultProp:g});return(0,b.jsx)(R,{scope:d,baseId:p(),value:m,onValueChange:n,orientation:h,dir:l,activationMode:j,children:(0,b.jsx)(q.Primitive.div,{dir:l,"data-orientation":h,...k,ref:c})})});T.displayName=N;var U="TabsList",V=c.forwardRef((a,c)=>{let{__scopeTabs:d,loop:e=!0,...f}=a,g=S(U,d),h=Q(d);return(0,b.jsx)(F,{asChild:!0,...h,orientation:g.orientation,dir:g.dir,loop:e,children:(0,b.jsx)(q.Primitive.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:c})})});V.displayName=U;var W="TabsTrigger",X=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,disabled:f=!1,...g}=a,h=S(W,d),j=Q(d),k=$(h.baseId,e),l=_(h.baseId,e),m=e===h.value;return(0,b.jsx)(I,{asChild:!0,...j,focusable:!f,active:m,children:(0,b.jsx)(q.Primitive.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":l,"data-state":m?"active":"inactive","data-disabled":f?"":void 0,disabled:f,id:k,...g,ref:c,onMouseDown:i(a.onMouseDown,a=>{f||0!==a.button||!1!==a.ctrlKey?a.preventDefault():h.onValueChange(e)}),onKeyDown:i(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&h.onValueChange(e)}),onFocus:i(a.onFocus,()=>{let a="manual"!==h.activationMode;m||f||!a||h.onValueChange(e)})})})});X.displayName=W;var Y="TabsContent",Z=c.forwardRef((a,d)=>{let{__scopeTabs:e,value:f,forceMount:g,children:h,...i}=a,j=S(Y,e),k=$(j.baseId,f),l=_(j.baseId,f),m=f===j.value,n=c.useRef(m);return c.useEffect(()=>{let a=requestAnimationFrame(()=>n.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,b.jsx)(L,{present:g||m,children:({present:c})=>(0,b.jsx)(q.Primitive.div,{"data-state":m?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":k,hidden:!c,id:l,tabIndex:0,...i,ref:d,style:{...a.style,animationDuration:n.current?"0s":void 0},children:c&&h})})});function $(a,b){return`${a}-trigger-${b}`}function _(a,b){return`${a}-content-${b}`}Z.displayName=Y;var aa=a.i(97895);function ab({className:a,...c}){return(0,b.jsx)(T,{"data-slot":"tabs",className:(0,aa.cn)("flex flex-col gap-2",a),...c})}function ac({className:a,...c}){return(0,b.jsx)(V,{"data-slot":"tabs-list",className:(0,aa.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...c})}function ad({className:a,...c}){return(0,b.jsx)(X,{"data-slot":"tabs-trigger",className:(0,aa.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...c})}function ae({className:a,...c}){return(0,b.jsx)(Z,{"data-slot":"tabs-content",className:(0,aa.cn)("flex-1 outline-none",a),...c})}var af=a.i(85102),ag=a.i(1556),ah=a.i(71917),ai=a.i(61237);let aj=(0,ai.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ak=(0,ai.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function al({borrowedBooks:a,userId:i}){let j=(0,d.useRouter)(),[k,l]=(0,c.useState)(null),m=a.filter(a=>"borrowed"===a.status),n=a.filter(a=>"returned"===a.status),o=async a=>{if(a.book){l(a.id);try{let b=await fetch("/api/return",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({borrowId:a.id,bookId:a.book.id,availableCopies:a.book.available_copies})}),c=await b.json();c.success?j.refresh():console.error("Error returning book:",c.error)}catch(a){console.error("Error returning book:",a)}finally{l(null)}}},p=a=>new Date(a)<new Date,q=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return(0,b.jsxs)(f.Card,{className:"border-border",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-foreground",children:"Borrowed Books"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)(ab,{defaultValue:"current",children:[(0,b.jsxs)(ac,{className:"mb-4",children:[(0,b.jsxs)(ad,{value:"current",children:["Current (",m.length,")"]}),(0,b.jsxs)(ad,{value:"returned",children:["Returned (",n.length,")"]})]}),(0,b.jsx)(ae,{value:"current",className:"space-y-4",children:0===m.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(af.BookOpen,{className:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No books currently borrowed"}),(0,b.jsx)(g.Button,{asChild:!0,className:"mt-4",children:(0,b.jsx)(e.default,{href:"/books",children:"Browse Books"})})]}):m.map(a=>(0,b.jsxs)("div",{className:"flex gap-4 p-4 border border-border rounded-lg",children:[(0,b.jsx)("div",{className:"h-24 w-16 bg-gradient-to-br from-primary/20 to-primary/5 rounded flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(af.BookOpen,{className:"h-6 w-6 text-primary/40"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)(e.default,{href:`/books/${a.book?.id}`,className:"font-semibold text-foreground hover:text-primary transition-colors",children:a.book?.title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.book?.author?.name}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,b.jsx)(ag.Calendar,{className:"h-3.5 w-3.5"}),"Borrowed: ",q(a.borrowed_at)]}),(0,b.jsxs)("span",{className:`flex items-center gap-1 ${p(a.due_date)?"text-destructive":"text-muted-foreground"}`,children:[p(a.due_date)?(0,b.jsx)(ak,{className:"h-3.5 w-3.5"}):(0,b.jsx)(aj,{className:"h-3.5 w-3.5"}),"Due: ",q(a.due_date)]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[p(a.due_date)&&(0,b.jsx)(h.Badge,{variant:"destructive",children:"Overdue"}),(0,b.jsx)(g.Button,{size:"sm",variant:"outline",onClick:()=>o(a),disabled:k===a.id,children:k===a.id?"Returning...":"Return"})]})]},a.id))}),(0,b.jsx)(ae,{value:"returned",className:"space-y-4",children:0===n.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(ah.CheckCircle,{className:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No returned books yet"})]}):n.map(a=>(0,b.jsxs)("div",{className:"flex gap-4 p-4 border border-border rounded-lg opacity-75",children:[(0,b.jsx)("div",{className:"h-24 w-16 bg-secondary rounded flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(af.BookOpen,{className:"h-6 w-6 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)(e.default,{href:`/books/${a.book?.id}`,className:"font-semibold text-foreground hover:text-primary transition-colors",children:a.book?.title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.book?.author?.name}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(ag.Calendar,{className:"h-3.5 w-3.5"}),"Borrowed: ",q(a.borrowed_at)]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(ah.CheckCircle,{className:"h-3.5 w-3.5"}),"Returned: ",q(a.returned_at||"")]})]})]}),(0,b.jsx)(h.Badge,{variant:"secondary",children:"Returned"})]},a.id))})]})})]})}a.s(["MyBooksContent",()=>al],84768)}];

//# sourceMappingURL=components_my-books-content_tsx_11db09fc._.js.map