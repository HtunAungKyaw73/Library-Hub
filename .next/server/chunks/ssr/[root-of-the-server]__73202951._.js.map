{"version":3,"sources":["../../../../components/analytics-charts.tsx/__nextjs-internal-proxy.mjs","../../../../app/analytics/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AnalyticsCharts = registerClientReference(\n    function() { throw new Error(\"Attempted to call AnalyticsCharts() from the server but AnalyticsCharts is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/analytics-charts.tsx\",\n    \"AnalyticsCharts\",\n);\n","import { getBooks, getAuthors } from \"@/lib/baserow/client\"\nimport { AnalyticsCharts } from \"@/components/analytics-charts\"\n\nexport default async function AnalyticsPage() {\n  // Get books from Baserow\n  const books = await getBooks()\n\n  // Get authors from Baserow\n  const authors = await getAuthors()\n\n  // Process genre data\n  const genreCounts: Record<string, number> = {}\n  books?.forEach((book) => {\n    if (book.genre) {\n      genreCounts[book.genre] = (genreCounts[book.genre] || 0) + 1\n    }\n  })\n  const genreData = Object.entries(genreCounts).map(([name, value]) => ({\n    name,\n    value,\n  }))\n\n  // Process author data - count books per author\n  const authorBookCounts: Record<string, number> = {}\n  books?.forEach((book) => {\n    if (book.author?.name) {\n      authorBookCounts[book.author.name] = (authorBookCounts[book.author.name] || 0) + 1\n    }\n  })\n  const authorData = Object.entries(authorBookCounts).map(([name, books]) => ({\n    name,\n    books,\n  }))\n\n  // Process decade data\n  const decadeCounts: Record<string, number> = {}\n  books?.forEach((book) => {\n    if (book.published_year) {\n      const decade = Math.floor(book.published_year / 10) * 10\n      const decadeLabel = `${decade}s`\n      decadeCounts[decadeLabel] = (decadeCounts[decadeLabel] || 0) + 1\n    }\n  })\n  const decadeData = Object.entries(decadeCounts)\n    .map(([decade, count]) => ({ decade, count }))\n    .sort((a, b) => a.decade.localeCompare(b.decade))\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-foreground mb-2\">Library Analytics</h1>\n        <p className=\"text-muted-foreground\">Insights into our book collection and authors</p>\n      </div>\n\n      <AnalyticsCharts genreData={genreData} authorData={authorData} decadeData={decadeData} />\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"qUAEO,IAAM,EAAkB,CAAA,EAAA,AAD/B,EAAA,CAAA,CAAA,OAC+B,uBAAA,AAAuB,EAClD,WAAa,MAAM,AAAI,MAAM,4OAA8O,EAC3Q,gEACA,wEAHG,IAAM,EAAkB,CAAA,EAAA,AAD/B,EAAA,CAAA,CAAA,OAC+B,uBAAA,AAAuB,EAClD,WAAa,MAAM,AAAI,MAAM,4OAA8O,EAC3Q,4CACA,iJCLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,eAAe,IAE5B,IAAM,EAAQ,MAAM,CAAA,EAAA,EAAA,QAAA,AAAQ,GAGZ,OAAM,CAAA,EAAA,EAAA,UAAA,AAAU,IAGhC,IAAM,EAAsC,CAAC,EAC7C,GAAO,QAAQ,AAAC,IACV,EAAK,KAAK,EAAE,AACd,EAAW,CAAC,EAAK,KAAK,CAAC,CAAG,CAAC,CAAW,CAAC,EAAK,KAAK,CAAC,GAAI,CAAC,EAAI,CAE/D,GACA,IAAM,EAAY,OAAO,OAAO,CAAC,GAAa,GAAG,CAAC,CAAC,CAAC,EAAM,EAAM,GAAK,CAAC,MACpE,QACA,EACF,CAAC,EAGK,EAA2C,CAAC,EAClD,GAAO,QAAQ,AAAC,IACV,EAAK,MAAM,EAAE,MAAM,AACrB,EAAgB,CAAC,EAAK,MAAM,CAAC,IAAI,CAAC,CAAG,CAAC,CAAgB,CAAC,EAAK,MAAM,CAAC,IAAI,CAAC,GAAI,CAAC,EAAI,CAErF,GACA,IAAM,EAAa,OAAO,OAAO,CAAC,GAAkB,GAAG,CAAC,CAAC,CAAC,EAAM,EAAM,GAAK,CAAC,MAC1E,QACA,EACF,CAAC,EAGK,EAAuC,CAAC,EAC9C,GAAO,QAAQ,AAAC,IACd,GAAI,EAAK,cAAc,CAAE,CACvB,IAAM,EAAS,AAAuC,QAAlC,KAAK,CAAC,EAAK,cAAc,CAAG,IAC1C,EAAc,CAAA,EAAG,EAAO,CAAC,CAAC,CAChC,CAAY,CAAC,EAAY,CAAG,CAAC,CAAY,CAAC,EAAY,GAAI,CAAC,CAAI,CACjE,CACF,GACA,IAAM,EAAa,OAAO,OAAO,CAAC,GAC/B,GAAG,CAAC,CAAC,CAAC,EAAQ,EAAM,GAAK,CAAC,QAAE,QAAQ,EAAM,CAAC,EAC3C,IAAI,CAAC,CAAC,EAAG,IAAM,EAAE,MAAM,CAAC,aAAa,CAAC,EAAE,MAAM,GAEjD,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mDAA0C,sBACxD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,qDAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAC,UAAW,EAAW,WAAY,EAAY,WAAY,MAGjF","ignoreList":[0]}